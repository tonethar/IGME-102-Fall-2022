# Week 9 Notes

## Navigation

- [Monday Notes](#monday)
- [Wednesday Notes](#wednesday)

<!--
- [Friday Notes](#friday)
-->

<hr>

<a id="monday" />

## I. Monday

### I-A. Review Exam

### I-B. Review PE-12 *Sets*

<hr>

<a id="wednesday" />

## II. Wednesday
- Let's get started on File I/O ("Input/Output")
- And *parsing* strings

### II-A. Loading Text
- See *External Text Files Strings* PDF in myCourses
- Loading a text file:
  - https://p5js.org/reference/#/p5/loadStrings
  - `loadStrings(path)` opens the file whose `path` is passed in as a parameter, reads the file line by line, and returns an array of strings. 
  - It is *asynchronous*:
    - meaning it takes an indeterminate amount of time to happen
    - meaning it occurs in "the background" while our other code executes
    - so use `preload()`, or specify a *callback* function, and optionally an *error* function
  - `loadStrings(path,[successCallback],[failureCallback])` - returns an array of strings
  - PS - we can load a *local* file (meaning, it's on the same storage device our sketch.js is), or a *remote* file that's out there on the Internet somewhere

```js
function setup() {
  // This text file is out on the Internet
  // You can see its contents by pasting the URL into a web brower
  loadStrings("https://people.rit.edu/acjvks/shared/330/data/gettysburg.txt", dataLoaded, loadError);
}

// called "on success"
function dataLoaded(wordArray){
  console.log(wordArray);
}

// called "on failure"
function loadError(error){
  console.log("ERROR",error);
}
```

<hr>

### II-B. Looking ahead - loading a JSON web service and displaying the results

- Here we a loading a text file - in a format called JSON - that contains real-time information about the most powerful earthquakes that have happened in the world in the last 24-hours
- This is just an example for now - so you can see where we are going in the near future

```js
function setup() {
  loadJSON("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson", dataLoaded, loadError);
}

// called "on success"
function dataLoaded(json){
  console.log(json);
  let resultsArray = json.features;
  // sort the results "in place" - trying to get today's most powerful earthquake
  resultsArray.sort((a,b) => b.properties.mag - a.properties.mag)
  let highestMag = resultsArray[0];
  let place = highestMag.properties.place;
  let mag = highestMag.properties.mag;
  let timestamp = highestMag.properties.time;
  let date = new Date().toLocaleString();
  console.log("Location:", place, "- Magnitude:", mag, "- Date:", date);
}

// called "on failure"
function loadError(error){
  console.log("ERROR",error);
}
```



<hr>

### II-C. Strings
- Strings are a series of single characters - technically, an array of characters
- Strings are also objects:
  - they hold data
  - they have methods to do "stuff"
  - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String

```js
// String methods
let quote = "No good deed goes unpunished";
quote = quote.toUpperCase();
console.log(quote);
console.log(quote.charAt(0));
console.log(quote.substring(0,2));
console.log(quote.substring(0,7));
console.log(quote.indexOf("DEED"));
console.log(quote.endsWith("UNPUNISHED"));
quote = quote.replace("UNPUNISHED", "PUNISHED")
console.log(quote);
```

<hr>

### II-D. Strings are arrays of characters

- We can "loop" through strings of characters

**Loop & log letters to console, one letter at a time**
```js
const quote = "No good deed goes unpunished";
for(let char of quote){
  console.log(char);
}
```

**Loop & do some p5 drawing**
```js
function setup() {
  createCanvas(400, 400);
  background(0);
  const quote = "No good deed goes unpunished";
  for(let char of quote){
    fill(55+random(200), 55+random(200), 55+random(200));
    text(char, random(width), random(height))
  }
}
```

<hr>

### II-E. "Split" a string and turn it into an array

**Split a string into 5 "words"**
```js
const quote = "No good deed goes unpunished";
const wordArray = quote.split(" ");
console.log(wordArray);
```

**Split a string into words and visualize it**
```js
function setup() {
  createCanvas(400, 400);
  background(0);
  const quote = "In preparing for battle I have always found that plans are useless but planning is indispensable. - Dwight D. Eisenhower";
  // turn quote into an array
  const wordArray = quote.split(" ");
  let y = 20;
  let x = 5
  for(let word of wordArray){
    //text(word, random(0, width - 20), random(20, height));
    fill(55 + random(200),55 + random(200),55 + random(200))
    text(word, x, y );
    x += 10;
    y += 15;
    
  }
}
```

**Grab a file from the Internet and "split" the words**
```js
function setup() {
  loadStrings("https://people.rit.edu/acjvks/shared/330/data/gettysburg.txt", dataLoaded, loadError);
}

// called "on success"
function dataLoaded(wordArray){
  console.log(wordArray);
  let string = wordArray[0];
  let gaArray = string.split(" ");
  console.log(gaArray);
}

// called "on failure"
function loadError(error){
  console.log("ERROR",error);
}
```
<hr>

### II-F. Parsing a CSV file

- CSV stands for "comma separated values" - which are commonly imported/exported from spreadsheets
- With CSV, each row is a *record* containing data values about some "thing"
- In an individual row, each attribute of that thing is separated by commas
- See the cars.csv file below as an example:
  - each row is a record about a car
  - the attributes of each car (make, model, coolness) are separated by commas
- Unlike data formats such as XML or JSON, CSV values are not *labeled*. Instead, their meaning is based on their *position* in the file
- Believe it or not, CSV is the most popular format for exchanging scientific data sets for research, data science, machine learning, etc

```js
function setup() {
  // This text file is out on the Internet
  // You can see its contents by pasting the URL into a web brower
  loadStrings("https://people.rit.edu/acjvks/shared/330/data/cars.csv", dataLoaded, loadError);
}

// called "on success"
function dataLoaded(wordArray){
  console.log(wordArray); // each line is in an array
  for (let line of wordArray){
    let car = line.split(",");
    let make = car[0];
    let model = car[1];
    let coolness = car[2];
    console.log(make, model, "- coolness:", coolness);
  }
  // we are actually getting a 6th "car" because of the empty string at the end of the array
  // how to fix this?
}

// called "on failure"
function loadError(error){
  console.log("ERROR",error);
}
```

<hr>

### II-G. Now you try it

1) Use VSCode

2) Load an external text file (that's local) with lyrics to a favorite song or poetry (at least 7 lines) via `loadStrings()` with a callback method

3) Use `.split()` and at least 1 other string/array method on the loaded text

4) Draw the words to the screen using `text()`:

    - For useful p5 text functions,  see today's slides and the *Typography* section of https://p5js.org/reference/

5) Customize the font:

    - https://p5js.org/reference/#/p5/textFont
    - Use a web safe font https://developer.mozilla.org/en-US/docs/Learn/CSS/Styling_text/Fundamentals#Web_safe_fonts

6) ZIP and POST to 9B dropbox - we'll look at these next time in class


<!--

<hr>


<a id="friday" />

## III. Friday

-->


<hr><hr>

| <-- Previous Unit | Home | Next Unit -->
| --- | --- | --- 
| [**Week 8 notes.md**](08.md)     |  [**IGME-102 Schedule**](../schedule.md) | Week 10 notes
